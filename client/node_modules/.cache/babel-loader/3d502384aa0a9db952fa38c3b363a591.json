{"ast":null,"code":"import _classCallCheck from\"C:/Users/jasmi/where-do-you-vibe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/jasmi/where-do-you-vibe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/jasmi/where-do-you-vibe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/jasmi/where-do-you-vibe/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Map from'./components/Map.js.js';import SpotifyWebApi from'spotify-web-api-js';import cities from'./places.json';//import './components/UserGenresTemplate.js';\nimport UserGenreList from'./components/UserGenresTemplate';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var spotifyApi=new SpotifyWebApi();var findCities=require('./compare-artists');var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);//This reads the token from the url, token allows us access to user info\n_this=_super.call(this);var LOGIN_URI=process.env.NODE_ENV!=='production'?'http://localhost:8888/login':'https://where-do-you-vibe.herokuapp.com/login';var params=_this.getHashParams();var token=params.access_token;if(token){spotifyApi.setAccessToken(token);}_this.state={//sets state, allows us to know if someone is logged in and their name\nloggedIn:token?true:false,user:{displayName:'not logged in',profilePic:''},topGenre:{},topCity:'No top matches generated yet',allCities:cities};var c=_this.state.loggedIn?_this.getUserInfo():\"\";console.log(_this.state.topCity);return _this;}_createClass(App,[{key:\"getHashParams\",value:function getHashParams(){var hashParams={};var e,r=/([^&;=]+)=?([^&;]*)/g,q=window.location.hash.substring(1);e=r.exec(q);while(e){hashParams[e[1]]=decodeURIComponent(e[2]);e=r.exec(q);}return hashParams;}},{key:\"getUserInfo\",value:function getUserInfo(){var _this2=this;//call to get user infomation from spotify api\nspotifyApi.getMe().then(function(data){_this2.setState({user:{displayName:data.display_name,profilePic:data.images[0].url}});});}},{key:\"getGenreInfo\",value:function getGenreInfo(){var _this3=this;spotifyApi.getMyTopArtists({time_range:'medium_term',limit:20}).then(function(data){_this3.setState({topGenre:data,topCity:findCities.findCities(data,_this3.state.allCities)});});}},{key:\"render\",value:function render(){var _this4=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"a\",{href:LOGIN_URI,children:\" Login to Spotify \"}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Hello \",this.state.user.displayName]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:this.state.user.profilePic,style:{height:150}})}),this.state.loggedIn&&/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return _this4.getGenreInfo();},children:\"Get your genres\"}),/*#__PURE__*/_jsx(\"div\",{children:this.state.topCity}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Map,{cityLocations:\"\",lat_lan:\"\"})})]});}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["C:/Users/jasmi/where-do-you-vibe/client/src/App.js"],"names":["React","Component","Map","SpotifyWebApi","cities","UserGenreList","spotifyApi","findCities","require","App","LOGIN_URI","process","env","NODE_ENV","params","getHashParams","token","access_token","setAccessToken","state","loggedIn","user","displayName","profilePic","topGenre","topCity","allCities","c","getUserInfo","console","log","hashParams","e","r","q","window","location","hash","substring","exec","decodeURIComponent","getMe","then","data","setState","display_name","images","url","getMyTopArtists","time_range","limit","height","getGenreInfo"],"mappings":"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","sourcesContent":["import React, { Component} from 'react';\r\nimport Map from './components/Map.js.js'\r\nimport SpotifyWebApi from 'spotify-web-api-js';\r\nimport cities from './places.json';\r\n\r\n//import './components/UserGenresTemplate.js';\r\nimport UserGenreList from './components/UserGenresTemplate';\r\n\r\n\r\nconst spotifyApi = new SpotifyWebApi();\r\nvar findCities = require('./compare-artists');\r\n\r\n\r\nclass App extends Component {\r\n  constructor(){ //This reads the token from the url, token allows us access to user info\r\n    super();\r\n    const LOGIN_URI =\r\n    process.env.NODE_ENV !== 'production'\r\n    ? 'http://localhost:8888/login'\r\n    : 'https://where-do-you-vibe.herokuapp.com/login';\r\n\r\n    const params = this.getHashParams();\r\n    const token = params.access_token;\r\n    if (token) {\r\n      spotifyApi.setAccessToken(token);\r\n    }\r\n    this.state = { //sets state, allows us to know if someone is logged in and their name\r\n      loggedIn: token ? true : false,\r\n      user: {displayName:'not logged in', profilePic:''},\r\n      topGenre: {},\r\n      topCity: 'No top matches generated yet',\r\n      allCities: cities,\r\n    }\r\n    var c = this.state.loggedIn ? this.getUserInfo() : \"\";\r\n  console.log(this.state.topCity)\r\n  };\r\n\r\n \r\n  getHashParams(){\r\n    var hashParams = {};\r\n    var e, r = /([^&;=]+)=?([^&;]*)/g,\r\n        q = window.location.hash.substring(1);\r\n    e = r.exec(q)\r\n    while (e) {\r\n       hashParams[e[1]] = decodeURIComponent(e[2]);\r\n       e = r.exec(q);\r\n    }\r\n    return hashParams;\r\n  };\r\n\r\n  getUserInfo(){ //call to get user infomation from spotify api\r\n      spotifyApi.getMe()\r\n      .then((data) => {\r\n        this.setState({\r\n          user: { \r\n              displayName: data.display_name, \r\n              profilePic: data.images[0].url\r\n            }\r\n        });\r\n      });  \r\n  };\r\n\r\n  \r\ngetGenreInfo(){\r\n  spotifyApi.getMyTopArtists({time_range: 'medium_term', limit: 20})\r\n  .then((data)=>{\r\n     this.setState({\r\n       topGenre: data,\r\n       topCity: findCities.findCities(data, this.state.allCities),\r\n    });     \r\n   });\r\n\r\n}\r\n  \r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        <a href={LOGIN_URI}> Login to Spotify </a>\r\n        <div>\r\n          Hello { this.state.user.displayName }\r\n        </div>\r\n        <div>\r\n          <img src={this.state.user.profilePic} style={{ height: 150 }}/>\r\n        </div>\r\n        \r\n      { this.state.loggedIn &&\r\n        <button onClick={() => this.getGenreInfo()}>\r\n         Get your genres\r\n        </button>\r\n      }\r\n      <div>\r\n        {this.state.topCity}\r\n      </div>\r\n\r\n        <div>\r\n        <Map cityLocations = {\"\"} lat_lan={\"\"}/>\r\n        </div>\r\n       \r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default App;"]},"metadata":{},"sourceType":"module"}